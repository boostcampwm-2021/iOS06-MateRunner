
# Mate Runner
<img height="250" src="https://user-images.githubusercontent.com/41044154/139385796-bbbcb2d1-0f0b-48ea-a904-3de25813ae89.png"></img>
> **_함께 달리는 즐거움 🏃‍♂️🏃‍♀️, Mate Runner_** <br/><br/>
> **개발기간: 2021.10 ~ 2021.12**

<br/>

## ⭐️ 프로젝트 소개


달린 거리와 시간, 소모한 칼로리를 측정할 수 있어요! 

측정한 정보를 편리하게 확인할 수 있습니다!

또한 **친구와 함께 실시간으로 달릴 수 있는** 러닝앱입니다 🏃‍♂️🏃‍♀️

<br/>

## 🌳 🍎 Team Apple Garden 🍎 🌳

|S008 김민지|S042 이유진|S044 이정원|S051 전여훈|
|:-:|:-:|:-:|:-:|
|<img src="https://avatars.githubusercontent.com/u/48787170?v=4" width=200>|<img src="https://avatars.githubusercontent.com/u/41044154?v=4" width=200>|<img src="https://avatars.githubusercontent.com/u/77449223?v=4" width=200>|<img src="https://avatars.githubusercontent.com/u/46087477?v=4" width=200>|
|[@mingd1023](https://github.com/mingd1023)|[@lee-yujinn](https://github.com/lee-yujinn)|[@devJungwonLee](https://github.com/devjungwonlee)|[@jeonyeohun](https://github.com/jeonyeohun)|


<br/>

## ⚙️ 개발환경 및 라이브러리
[![swift](https://img.shields.io/badge/swift-5.0-orange)]()
[![xcode](https://img.shields.io/badge/Xcode-13.0-blue)]()
[![rxswift](https://img.shields.io/badge/RxSwift-6.2.0-green)]()
[![firebase](https://img.shields.io/badge/Firebase-8.9.0-red)]()
[![snapkit](https://img.shields.io/badge/SnapKit-5.0.1-yellow)]()

<br/>

## 🌟 프로젝트 주요 기능

> 🔑 Apple 계정을 통해 회원가입, 로그인을 할 수 있어요!

<img src="https://user-images.githubusercontent.com/41044154/144353747-ba7d89bc-9385-4e12-ad01-26b10748d32d.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144353744-529629b3-ba00-4ac8-bc71-cf24adfcd17e.png" width=30%>
<img src="https://user-images.githubusercontent.com/41044154/144353735-ed74ea31-55f7-4ee9-9f77-c24d782e42f2.png" width=30%>

> ⏱ 목표 거리를 설정하고 달리기 기록을 측정해보세요!

<img src="https://user-images.githubusercontent.com/41044154/144346994-e1917f58-aac2-494d-8e45-6d955de7c3cf.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144346991-f31db8b1-0ffe-4a5e-b9a6-bd681e84e8c0.png" width=30%>
<img src="https://user-images.githubusercontent.com/41044154/144346988-2959fe08-ed02-4fd6-963e-276cb143a437.png" width=30%>
<img src="https://user-images.githubusercontent.com/41044154/144346986-24cb4376-ad4e-4968-9889-3b47c1e38fb6.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144346983-091b49db-a8cb-4fce-9d46-9a06e8994f88.png" width=30%>
<img src="https://user-images.githubusercontent.com/41044154/144346969-d2743fe7-dca1-45d5-b426-cbe545e90177.png" width=30%>

> 💌 메이트를 추가하고 함께 달리기에 초대해보세요!

<img src="https://user-images.githubusercontent.com/41044154/144347899-bab1eae0-a873-456e-9867-f2648195e5e2.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144347895-6e9930ae-29ae-4d49-8a12-9257841f8223.png" width=30%>
<img src="https://user-images.githubusercontent.com/41044154/144347883-2a3b6a40-7625-45b5-9bf6-626d31c37aa7.png" width=30%>

> 🤛 메이트와 누가 더 빨리 도착하는지 대결해보세요! 

<img src="https://user-images.githubusercontent.com/41044154/144348144-b5065261-6f42-479d-a067-b2ae5273e122.png" width=23%><img src="https://user-images.githubusercontent.com/41044154/144348142-93849c54-6630-4377-b27a-259d70334aba.png" width=23%>
<img src="https://user-images.githubusercontent.com/41044154/144348136-237c5318-d98e-48e5-8efc-434afeb0c037.png" width=23%><img src="https://user-images.githubusercontent.com/41044154/144348126-31ce1ad8-4ba2-496b-b791-e0dab4604de3.png" width=23%>

> 🤝 메이트와 정해진 거리를 함께 달려서 목표를 달성해보세요!

<img src="https://user-images.githubusercontent.com/41044154/144348644-8154ec56-b467-40f4-af09-46196c67f4d9.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144348635-e3cc48b8-00a9-4a61-ab61-0e63d97eff57.png" width=30%>

> 🧚‍♀️ 함께 달린 메이트를 칭찬해주세요 :)

<img src="https://user-images.githubusercontent.com/41044154/144349120-c83428f7-3246-4117-bee8-f35a2bef93bb.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144349111-1cc9e3f2-e9f7-413c-b0df-80ed5f66c496.png" width=30%>

> 📝 나의 운동 기록과 메이트의 운동 기록도 확인할 수 있어요!

<img src="https://user-images.githubusercontent.com/41044154/144349375-bb97e656-8492-4fc6-8c67-bab83e669476.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144349373-8dce3e93-df11-4846-a74f-09c8ae51f421.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144349366-396073ac-6290-441f-8d69-eed6ebe166b5.png" width=30%>

> 👬 닉네임으로 검색하여 메이트 신청을 하고 알림을 통해 수락할 수 있어요!

<img src="https://user-images.githubusercontent.com/41044154/144351956-7866718d-d4bb-4cc1-80e5-a5e3809d8119.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144351962-cb328883-d12a-4744-8def-34f832415fc5.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144351969-f461489a-36ec-4844-a79f-999e8fd65550.png" width=30%>

> 👤 프로필 편집 화면에서 프로필 이미지와 신체 정보를 수정할 수 있어요!

<img src="https://user-images.githubusercontent.com/41044154/144354057-7ed5c855-f2c4-4916-954e-2ba72fd12aae.png" width=30%><img src="https://user-images.githubusercontent.com/41044154/144354040-71b94fce-d2b1-49b8-ae62-208b4c13f277.png" width=30%>
<img src="https://user-images.githubusercontent.com/41044154/144354050-3ddd21b3-bfef-4c20-98ab-3050d60c7719.png" width=30%>

<br/>

## ⚒ 아키텍쳐 

### ⏺ MVVM-C & Clean Architecture

<img width="994" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202021-11-20%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%2010 40 56" src="https://user-images.githubusercontent.com/41044154/144341210-dc5fefb0-5688-4697-9515-3319f1901b72.png">

> **MVVM**
- MVVM을 도입하여 뷰컨트롤러와 뷰는 화면을 그리는 역할에만 집중하고 데이터 관리, 로직의 실행은 뷰모델에서 진행되도록 했습니다.
- UIKit 요소가 없어도 뷰에 보여질 값들을 뷰모델을 단독으로 단위 테스트하여 확인하고 검증할 수 있게 했습니다.

> **Clean Architecture**
- 뷰모델의 비즈니스 로직들을 유즈케이스로, 네트워크나 로컬 영구저장소에 대한 요청은 repository로 분리해 각 레이어의 역할을 분명하게 나누었습니다.
- 단위 테스트에서는 서로 의존관계에 있는 레이어들을 Mock 레이어로 제공하여 원하는 조건을 쉽게 테스트 할 수 있도록 했습니다.

> **Coordinator**
- 화면 전환에 대한 로직을 ViewController로부터 분리하고 의존성 객체에 대한 주입을 외부에서 처리하도록 하기 위해 코디네이터를 사용했습니다.

<br/>

## 🔥 기술적 도전

### ⏺ RxSwift
- 비동기 처리가 많이 필요한 앱의 특성상, Callback Hell을 피하고 Reactive Programming에 대한 이해를 높이기 위해 RxSwift를 도입하였습니다.
- RxSwift의 Operator들을 효과적으로 사용하여 효율적으로 비동기 처리를 하였습니다.
- 네트워킹을 통해 실시간 데이터를 주고 받아야 하는 흐름을 RxSwift를 통해 선언적으로 작성하였습니다.


### ⏺ CoreMotion & CoreLocation
- 실시간으로 운동정보를 측정하기 용이한 `CoreMotion` 을 통해 이동거리와 사용자의 현재 상태를 판단해 칼로리를 직접 계산하는 방식을 선택하였습니다.
- 사용자의 이동 경로를 실시간으로 반영하고 좌표값을 저장을 위해 `CoreLocation`을 사용했습니다. distanceFilter 속성을 사용해 어느 정도 이상의 위치 변화가 생겼을 때 좌표 정보를 전달받아 저장하는 방식으로 구현하였습니다.

### ⏺ Firebase를 활용한 실시간 데이터 스트리밍
- 바뀌는 정보를 담을 Entity를 설계했고 immutability를 지키기 위해 새롭게 갱신된 값이 갱신되면 인스턴스를 새롭게 생성하고 변화한 프로퍼티만을 갱신시켜주며 서버와 통신을 했습니다. 
- Firebase의 Realtime Database를 활용해 변경사항을 옵저빙하고, 값이 갱신되면 실시간으로 뷰에 반영하여 상대방의 정보도 확인할 수 있도록 했습니다.

### ⏺ 재사용 가능한 View & ViewController 상속
- 달리기 모드에 따라 화면 구성이 조금씩 차이가 있어 공통적인 부분은 상위 View Controller로부터 상속 받고 다른 구성 요소에 대하여 재정의할 수 있도록 하였습니다.
- 여러 화면에서 공통적으로 사용되는 UI 등은 별도의 Custom Class로 정의하여 View의 재사용성을 높이고자 하였습니다.

### ⏺ Image Cache
- 메모리 캐시와 디스크 캐시를 활용해 이미지의 캐싱을 구현했습니다.
- 디스크 캐시의 경우 서버에 새롭게 올라간 이미지는 ETag를 활용해 새롭게 갱신시켜 주었습니다.

### ⏺  Rx 테스트 코드 작성
- 분리한 아키텍처에서 뷰모델의 Input, Output과 UseCase의 비즈니스 로직등을 테스트했습니다.
- Default(실제 사용하는 로직이 있는), Mock(테스트만을 위한) 두 가지의 객체를 따로 정의해 테스트 코드 작성했습니다
- 모든 테스트 코드의 커버리지가 90% 이상이 될 수 있도록 확인하며 진행했습니다.


<br/>
<br/>

**저희의 우당탕탕 개발기에 대해 더 자세한 내용을 보고 싶으시다면! [🍎  Team Apple Garden의 Wiki](https://github.com/boostcampwm-2021/iOS06-MateRunner/wiki)**
